# üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ DNS Routing Manager

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ macOS –≤ –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É**

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
curl -fsSL https://raw.githubusercontent.com/vladburba/dns-routing-manager/main/install.sh | bash
```

**–ò–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:**

```bash
# 1. –°–∫–∞—á–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫
curl -O https://raw.githubusercontent.com/vladburba/dns-routing-manager/main/install.sh

# 2. –°–¥–µ–ª–∞–π—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x install.sh

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É
./install.sh
```

## üìã –ß—Ç–æ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –¥–µ–ª–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å macOS
2. **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Homebrew** (–µ—Å–ª–∏ –Ω–µ—Ç)
3. **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Python 3.12+** (–µ—Å–ª–∏ –Ω–µ—Ç)
4. **–°–∫–∞—á–∏–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é** —Å GitHub
5. **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ** Python
6. **–°–æ–∑–¥–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `dns-routing`** –¥–æ—Å—Ç—É–ø–Ω—É—é –≤–µ–∑–¥–µ
7. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç** –≤–∞—à–∏ —Å–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

## ‚úÖ –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É:
```bash
dns-routing status
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
dns-routing --help

# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å DNS —Ä–µ–∑–æ–ª–≤–∏–Ω–≥
dns-routing dns resolve yandex.ru
dns-routing dns resolve google.com

# –ü–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω–æ (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
dns-routing process --dry-run

# –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ä–æ—Å—Å–∏–π—Å–∫–∏–µ –¥–æ–º–µ–Ω—ã —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—É—é —Å–µ—Ç—å
dns-routing process --ru-only

# –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –¥–æ–º–µ–Ω—ã —á–µ—Ä–µ–∑ VPN
dns-routing process --com-only
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ –≤–∞—à—É —Å–µ—Ç—å

### 1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –≤–∞—à–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
```bash
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
ifconfig | grep -E "^(en|utun)"

# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ gateway
netstat -rn | grep default
```

### 2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
nano ~/dns-routing-manager/config/settings.yaml
```

–ò–∑–º–µ–Ω–∏—Ç–µ —Å–µ–∫—Ü–∏—é `network`:
```yaml
network:
  local:
    interface: "en0"        # –í–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (WiFi/Ethernet)
    gateway: "192.168.1.1"  # –í–∞—à —Ä–æ—É—Ç–µ—Ä
  vpn:
    interface: "utun0"      # –í–∞—à VPN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω—ã:
```bash
# –†–æ—Å—Å–∏–π—Å–∫–∏–µ –¥–æ–º–µ–Ω—ã (—á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—É—é —Å–µ—Ç—å)
nano ~/dns-routing-manager/config/domains_ru.txt

# –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –¥–æ–º–µ–Ω—ã (—á–µ—Ä–µ–∑ VPN)
nano ~/dns-routing-manager/config/domains_com.txt
```

## üîß –ü—Ä–∏–º–µ—Ä—ã –¥–æ–º–µ–Ω–æ–≤

### domains_ru.txt (–ª–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å):
```
yandex.ru
mail.ru
sberbank.ru
tinkoff.ru
*.gov.ru
*.edu.ru
```

### domains_com.txt (VPN):
```
github.com
stackoverflow.com
*.amazonaws.com
*.googleapis.com
facebook.com
twitter.com
```

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞:
```bash
# –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
sudo -v
```

### VPN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ –Ω–∞–π–¥–µ–Ω:
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPN —Å–Ω–∞—á–∞–ª–∞
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
ifconfig | grep utun
```

### –ö–æ–º–∞–Ω–¥–∞ dns-routing –Ω–µ –Ω–∞–π–¥–µ–Ω–∞:
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
export PATH="/usr/local/bin:$PATH"
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å DNS:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ dig —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:
which dig

# –ï—Å–ª–∏ –Ω–µ—Ç - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
brew install bind
```

## üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ

```bash
# –£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
rm -rf ~/dns-routing-manager

# –£–¥–∞–ª–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
sudo rm /usr/local/bin/dns-routing

# –û—á–∏—Å—Ç–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã (–µ—Å–ª–∏ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã)
# dns-routing routes clear  # –ü–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º!
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **GitHub Issues**: https://github.com/vladburba/dns-routing-manager/issues
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: https://github.com/vladburba/dns-routing-manager
- **Email**: vladburba@example.com

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- **–¢—Ä–µ–±—É–µ—Ç—Å—è macOS** (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å –Ω–∞ Sequoia 15.6.1+)
- **–¢—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ sudo** –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
- **VPN –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å VPN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏
- **–ú–∞—Ä—à—Ä—É—Ç—ã —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è** –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã
- **–í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** –≤ dry-run —Ä–µ–∂–∏–º–µ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
